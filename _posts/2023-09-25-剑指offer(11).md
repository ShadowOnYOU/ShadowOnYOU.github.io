---
layout: post
title: 剑指offer(11)——简单+中等
categories: [cate1, cate2]
description: some word here
keywords: keyword1, keyword2
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---



## 题目129:

字母迷宫游戏初始界面记作二维字符串数组grid，请判断玩家是否能在 grid 中找到目标单词target。
注意：寻找单词时 **必须** 按照字母顺序，通过水平或垂直方向相邻的单元格内的字母构成，同时，同一个单元格内的字母 **不允许被重复使用** 。

 

![img](https://assets.leetcode.com/uploads/2020/11/04/word2.jpg)

 

**示例 1：**

```
输入：grid = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], target = "ABCCED"
输出：true
```

**示例 2：**

```
输入：grid = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], target = "SEE"
输出：true
```

**示例 3：**

```
输入：grid = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], target = "ABCB"
输出：false
```

### 解题方法1:回溯

![image-20230925193802544](https://github.com/ShadowOnYOU/images/blob/main/test202309251938048.png?raw=true)

```c++
class Solution {
public:
    bool exist(vector<vector<char>>& grid, vector<vector<int>>& visited, int i, int j, string& s, int k) {
        if (grid[i][j] != s[k]) {
            return false;
        } else if (k == s.length() - 1) {
            return true;
        }
        visited[i][j] = true;
        vector<pair<int, int>> directions{{0, 1}, {0, -1}, {1, 0}, {-1, 0}};
        bool result = false;
        for (const auto& dir: directions) {
            int newi = i + dir.first, newj = j + dir.second;
          // 这边我觉得很厉害，我们在使用时可以直接限定一下得到有效的位置
            if (newi >= 0 && newi < grid.size() && newj >= 0 && newj < grid[0].size()) {
                if (!visited[newi][newj]) {
                    bool flag = exist(grid, visited, newi, newj, s, k + 1);
                    if (flag) {
                        result = true;
                        break;
                    }
                }
            }
        }
        visited[i][j] = false;
        return result;
    }

    bool wordPuzzle(vector<vector<char>>& grid, string word) {
        int h = grid.size(), w = grid[0].size();
        vector<vector<int>> visited(h, vector<int>(w)); // 这边初始化的方式可以学习一下
        for (int i = 0; i < h; i++) {
            for (int j = 0; j < w; j++) {
                bool flag = exist(grid, visited, i, j, word, 0);
                if (flag) {
                    return true;
                }
            }
        }
        return false;
    }
};
```

