---
layout: post
title: 嵌入式开发——微处理器
categories: [嵌入式开发, 微处理器]
description: some word here
keywords: 嵌入式开发, 微处理器
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---

# 嵌入式开发——微处理器

## 1. 嵌入式系统硬件

1. 嵌入式系统硬件经常在循环中使用(“循环中的硬件”)：网络物理系统
2. 传感器：把感知到的信息转化为统一的信息
3. AD转换器：模拟量和数值量的转换
   1. 模拟数字转换器即[A/D转换器](https://baike.baidu.com/item/A%2FD转换器/4883848)，或简称ADC，通常是指一个将[模拟信号](https://baike.baidu.com/item/模拟信号/706796)转变为数字信号的电子元件。通常的[模数转换器](https://baike.baidu.com/item/模数转换器/7745507)是将一个输入电压信号转换为一个输出的数字信号。由于数字信号本身不具有实际意义，仅仅表示一个相对大小。故任何一个模数转换器都需要一个参考模拟量作为转换的标准，比较常见的参考标准为最大的可转换信号大小。而输出的数字量则表示输入信号相对于[参考信号](https://baike.baidu.com/item/参考信号/16525876)的大小 [1] 。
   2. ![截屏2023-09-20 14.46.44](https://github.com/ShadowOnYOU/images/blob/main/test202309201446943.png?raw=true)

## 2. 硬件平台

**包含**：CPU，总线bus，存储器memory，IO设备：传感器，网络等

## 3. 流行的微处理器

1. ARM
2. MIPS
3. PowerPC
4. X86

## 4. 冯诺依曼结构 && 哈佛结构

将程序指令存储器和数据存储器合并在一起

明显的特点： 使用两个独立的存储器模块，分别存储指令和数据，每个存储模块都不允许指令和数据并存；使用独立的两条总线，分别作为CPU与每个存储器之间的专用通信路径，而这两条总线之间毫无关 联。 

改进的哈佛结构，其结构特点为： 使用两个独立的存储器模块，分别存储指令和数据，每个存储模块都不允许指令和数据并存； 具有一条独立的地址总线和一条独立的数据总线，利用公用地址总线访问两个存储模块（程序存储 模块和数据存储模块），公用数据总线则被用来完成程序存储模块或数据存储模块与CPU之间的数 据传输； 两条总线由程序存储器和数据存储器分时共用。 

大多数DSP使用哈佛架构来处理流数据: 更大的内存带宽 更可预测的带宽

## 5. RISC与CISC的主要特征对比

![截屏2023-09-20 15.10.19](https://github.com/ShadowOnYOU/images/blob/main/test202309201510865.png?raw=true)

## 6. RISC-V

1. 简单、完全开源并且免费
2. 将基准指令和扩展指令分开，可以通过扩展指令做定制化的模块和扩展:RISC-V的基准指令确定后将不不会再有变化，这是RISC-V稳定性的重要保障。
3. 32、64、128位指令集

## 7. 设计系统芯片之前需要考虑的事情

1. 成本
2. 生态系统
3. 碎片化信息
   1. 碎片化是指由于不同版本和变种的芯片在市场上存在，导致软件、固件和驱动程序的开发和维护变得更加复杂和困难。碎片化可能导致以下问题：
      1. 软件兼容性问题：不同版本和变种的芯片可能有不同的指令集、功能和硬件接口，这可能导致软件在不同芯片上的兼容性问题。开发和维护软件时，需要针对不同芯片进行适配和测试，增加了开发成本和风险。
      2. 驱动程序支持问题：碎片化可能导致在不同芯片上需要开发和维护多个驱动程序版本。这对于设备制造商和终端用户来说都是一项挑战，因为他们需要确保在不同平台上的兼容性和稳定性。
      3. 更新和安全性问题：碎片化使得芯片的更新和安全补丁的分发变得复杂。如果存在多个芯片版本和变种，需要确保及时提供软件更新和安全补丁，以修复漏洞和提供新功能，这需要更多的资源和协调工作。

4. 安全性
5. 设计保证

## 8. 嵌入式微处理器器的分类

1. 嵌入式微处理器种类繁多，按位数可分为4位、8位、16位、32位和64位。
2. 根据功能不同，嵌入式微处理器分为四种：
   1. 嵌入式微处理单元(MPU)
   2. 嵌入式微控制器(MCU)（占用的市场份额最多）
   3. 嵌入式DSP处理器
   4. 嵌入式SoC

## 9. 嵌入式微处理器的特点

1. 基础是通用微处理器
2. 与通用微处理器相比的区别：
   1. 体积小、重量轻、可靠性高
   2. 功耗低
   3. 成本低：片上存储、引脚与封装、代码密度
   4. 工作温度、抗电磁干扰、可靠性等方面增强

## 10. ARM

arm && mips

RISC， 是一个卖IT内核的

1. 公司历史：ARM成立于1990年，最初是一个半导体知识产权（IP）公司，专注于设计和许可处理器架构。它的处理器设计具有高度可定制性和可扩展性，使其适用于广泛的应用领域。
2. 处理器架构：ARM公司的处理器架构基于RISC（Reduced Instruction Set Computer）设计原则，强调简化指令集和高效执行。ARM架构广泛应用于移动设备（如智能手机和平板电脑）、嵌入式系统、物联网（IoT）设备和其他低功耗应用。
3. IP许可模型：ARM的商业模型是基于IP许可的。它设计和开发处理器架构，并将其授权给其他公司，这些公司可以根据其需求进行定制和集成，以创建定制的芯片和解决方案。
4. 生态系统：ARM架构形成了一个庞大的生态系统，由许多合作伙伴公司组成，包括芯片制造商、系统设计公司、软件开发者和工具提供商。这个生态系统为ARM生态系统中的各种设备提供了广泛的支持和兼容性。
5. 应用领域：ARM架构的处理器广泛应用于移动通信、消费电子、汽车、工业控制、医疗设备和许多其他领域。ARM的处理器在低功耗、高性能和节能方面的优势使其成为许多设备和系统的首选。
6. 公司发展：ARM于2016年被日本软银集团收购，但仍然保持独立运营，并为全球客户提供处理器技术和解决方案。

## 11. X86 && ARM

x86架构：

- x86架构最初由英特尔（Intel）开发，并成为个人计算机（PC）领域的主导架构。
- x86处理器采用复杂指令集计算机（CISC）设计，其指令集包含大量复杂的操作指令。
- x86架构在计算能力和多任务处理方面表现出色，适用于高性能计算、桌面计算机、服务器和企业级应用。
- 常见的x86处理器包括英特尔的Core系列、Xeon系列以及AMD的Ryzen系列。

ARM架构：

- ARM架构最初由ARM（Advanced RISC Machines）公司开发，专注于低功耗和嵌入式系统。
- ARM处理器采用精简指令集计算机（RISC）设计，其指令集精简而简单，执行效率高。
- ARM架构在低功耗和节能方面具有优势，适用于移动设备、物联网（IoT）设备、嵌入式系统和便携式设备。
- 常见的ARM处理器包括ARM Cortex系列，如Cortex-A、Cortex-R和Cortex-M系列，它们针对不同的应用领域和性能需求提供不同的解决方案。

主要区别：

- 指令集：x86架构具有复杂的指令集，而ARM架构具有精简的指令集。
- 功耗和性能：ARM架构在低功耗和节能方面具有优势，而x86架构在高性能计算方面表现出色。
- 应用领域：x86架构主要用于桌面计算机、服务器和高性能计算领域，而ARM架构主要用于移动设备、物联网和嵌入式系统。
- 生态系统：x86架构拥有庞大而成熟的生态系统，而ARM架构也在不断发展壮大，并在移动设备和物联网领域拥有广泛的生态支持。

## 12. ARM处理器的分类

![截屏2023-09-25 10.36.59](https://github.com/ShadowOnYOU/images/blob/main/test202309251037624.png?raw=true)

### ARM架构【不会考】

1. 典型的RISC架构：
   1. 丰富的寄存器
   2. 加载/存储架构
   3. 简单的寻址模式
   4. 统一和固定长度的指令字段
2. 增强功能：
   1. 每条指令控制ALU和移位器
   2. 自动递增和自动递减寻址模式
   3. 多次加载/存储
   4. 有条件的执行（支持条件执行）
3. 结果：高性能、低码量、低功耗、低硅面积

### 流水线

1. 提高速度：大多数指令在单个周期内执行

2. 流水线清空，导致执行速度变慢（说人话：系统预测会跑if，但是实际跑的是else，所以需要清空）

   1. 流水线清空（Pipeline Flush）是一种处理器流水线中的控制机制，用于处理由于异常、分支预测失败或其他控制流变化而导致的指令流水线停顿或错误执行的情况。当流水线清空发生时，所有已经进入流水线但尚未完成的指令都被中止，并且相关的操作数和执行状态被清除，以确保下一条正确的指令能够正确执行。

      流水线清空的目的是维护指令流水线的正确性和一致性，以避免错误的指令结果和系统状态。以下是一些常见的情况和原因，可能导致流水线清空：

      1. 分支预测失败：当处理器在流水线中执行分支指令时，会进行分支预测，即预测分支的目标地址。如果分支预测失败，即预测错误的分支路径，会导致流水线中已经进入的指令无效，需要清空流水线并重新开始执行正确的指令流。
      2. 异常和中断：当处理器检测到异常或中断事件时，例如除零错误、内存访问错误或外部中断请求，需要立即停止流水线中的指令执行，并跳转到异常处理程序或中断服务例程。这会触发流水线清空，以确保异常处理的正确性和及时性。
      3. 数据相关性冲突：在流水线中，如果后续指令需要使用先前指令的结果作为操作数，而先前指令的结果尚未准备好或更新，则会发生数据相关性冲突。为了避免错误的结果，可能需要清空流水线并重新执行相关指令。
      4. 分支目标跳转：某些情况下，根据运行时的条件，处理器可能需要在流水线中进行分支目标的跳转。这可能包括条件分支、函数调用和返回等。当这种分支目标跳转发生时，可能需要清空流水线并重新开始执行新的指令流。

3. 分支预测技术

## 
